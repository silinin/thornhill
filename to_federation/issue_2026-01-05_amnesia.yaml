type: issue
priority: high
date: 2026-01-05
from: Si
to: Cradle

title: "ABC-бот: амнезия при длинных сессиях (45+ сообщений)"

description: |
  При 45+ сообщениях бот забывает что говорили в начале сессии.
  Причина: attention dilution в LLM.

symptoms:
  - Бот ходит кругами, задаёт те же вопросы
  - Теряет контекст ситуации/убеждения клиента
  - Мусихин подтвердил на реальном клиенте

proposed_solution:
  name: "State injection"
  description: |
    Передавать накопленный state в каждый запрос к Claude.

    Пример state:
    - Ситуация: видео с отцом больного ребёнка
    - Оценка: 8/10
    - Убеждение: я плохая мать
    - Стадия: исследование B

alternatives:
  1:
    name: "Резюме каждые N сообщений"
    description: "Бот делает summary и вставляет в контекст"
    pros: "Прозрачнее для отладки"
    cons: "Доп. запросы к API, задержки"
  2:
    name: "Явные якорные точки"
    description: "Бот периодически напоминает ключевые факты клиенту"
    pros: "Естественнее, клиент подтверждает"
    cons: "Может раздражать если часто"

discussion: "Чат команды: msg 621-630"

action_required:
  - Создать GitHub issue в thornhill
  - Добавить task в Plane
  - Получить мнение Мусихина по UX
